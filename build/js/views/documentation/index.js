define(["chaplin","views/base/view","text!templates/documentation/index.html","jquery","lib/view_helper"],function(e,t,n,r,i){return t.extend({template:n,className:"documentation index",renderedSections:[],listen:{rendered:function(){var e=this.$("section").map(function(){return r(this).attr("id")}).toArray(),t=e.map(function(e){return"text!templates/documentation/sections/"+e+".html"});this.renderedSections=[],require(t,function(){var t=arguments;e.forEach(function(e,n){this.renderSection(e,r(t[n]))}.bind(this))}.bind(this))},section_rendered:function(){this.$("section").length===this.renderedSections.length&&e.mediator.publish("documentation.index.rendered")},"documentation.index.rendered mediator":function(){this.enableCodeHighlighting(),this.enableScrollSpy(),this.enableSubNavs(),this.jumpToAnchor(),this.renderMiniBrowsers()}},renderSection:function(e,t){t=i.fixCodeIndentation(t),r("section#"+e).html(t),window.setTimeout(function(){this.renderedSections.push(e),this.trigger("section_rendered")}.bind(this),50)},enableCodeHighlighting:function(){Prism.highlightAll()},enableScrollSpy:function(){r('[data-spy="scroll"]').each(function(){r(this).scrollspy("refresh")})},enableSubNavs:function(){var e=r(window),t=r("body"),n=r(".subnav"),i=r(".navbar").first().height(),s=n.first().height(),o=parseInt(t.css("margin-top"),10),u=function(n,r,i,u){var a=e.scrollTop();return a>=r&&a<=i&&!u?(u=!0,n.addClass("subnav-fixed"),t.css("margin-top",o+s+"px")):(a<=r||a>=i)&&u&&(u=!1,n.removeClass("subnav-fixed"),t.css("margin-top",o+"px")),u};n.each(function(){var t=r(this),n=t.parents("section"),s=t.length&&t.offset().top-i,o=n.offset().top+n.height(),a=u(t,s,o,!1);e.scroll(function(){a=u(t,s,o,a)})})},renderMiniBrowsers:function(){r(".mini-browser").each(function(){var e=r(this);e.append(r('<img src="/img/mini-browser.png">')).css("background","transparent url("+e.data("img-url")+") no-repeat left 42px")})}})});